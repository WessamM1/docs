---
title:  Push an Image
---

## [Overview](#overview)

Follow the steps below to push an [image](/api-reference/image) to your [org's](/api-reference/org) private registry.

When configuring a [workload](/api-reference/workload) using the UI, the list of available [images](/api-reference/image) stored in your private
registry can be viewed by pressing Control-I.

An [image](/api-reference/image) can be pushed by using either [Docker](#push-docker), the [CLI](#push-cpln), or any Docker
compatible client.

## [Prerequisites](#prerequisites)

- Review the [image](/api-reference/image) reference page.
- [Minimum Policy](/api-reference/image#minimum-policy) to push an [image](/api-reference/image).
- Install [Docker](https://www.docker.com/) and the [CLI](/api-reference/cli).

## [Push using Docker](#push-docker)

### [Step 1 - Set up Docker authentication (Required)](#step-1)

Executing the command below will update the local Docker profile to use the CLI to authentication to your private registry when
performing the push.

```
cpln image docker-login --org ORG_NAME
```

<Tip>
The cpln [profile](manage-profile) named `default` will be used by Docker when authenticating to the private registry before the pushing the image.
If a different profile is required for authentication, set the `CPLN_PROFILE` environment variable to the desired profile name.
</Tip>

### [Step 2 - Build a new image using Docker and a Dockerfile (Optional)](#step-2)

If you have an existing [image](/api-reference/image), skip to [step 3](#step-3).

Executing the command below will [containerize](https://docs.docker.com/engine/api-reference/commandline/build/) your application
using the defined [Dockerfile](https://docs.docker.com/engine/api-reference/builder/). The [image](/api-reference/image) generated
will be tagged in the format required to push it to your private registry.

```
docker build -t ORG_NAME.registry.cpln.io/IMAGE[:TAG] .
```

<Tip>
NOTE: When building on a system architecture which is not amd64 (such as an M1/M2 Mac), use the following docker command:

docker build --platform=linux/amd64 -t ORG_NAME.registry.cpln.io/IMAGE[:TAG] .
</Tip>

### [Step 3 - Tag an existing image (Optional)](#step-3)

Executing the command below will [tag](https://docs.docker.com/engine/api-reference/commandline/tag/) an existing local
[image](/api-reference/image) in the format required to push it to your private registry.

**Required Image Name Format:** `ORG_NAME.registry.cpln.io/IMAGE[:TAG]`

If your [image](/api-reference/image) is already tagged in this format, skip to [step 4](#step-4).

```
docker tag SOURCE_IMAGE[:TAG] ORG_NAME.registry.cpln.io/IMAGE[:TAG]
```

### [Step 4 - Push image to your private registry](#step-4)

Executing the command below will authenticate and push the [image](/api-reference/image) to your private registry.

```
docker push ORG_NAME.registry.cpln.io/IMAGE[:TAG]
```

Depending on the size of the [image](/api-reference/image) and its dependencies, it might take a few minutes for the push to complete.

### [Step 5 - Use image in a workload](#step-5)

Once an [image](/api-reference/image) has been successfully pushed to your [org's](/api-reference/org) private registry, it can be referred to by
a [workload's container](/api-reference/workload#containers).

When setting up a [workload](/api-reference/workload), the list of available [images](/api-reference/image) stored in your private
registry can be viewed and selected by pressing Control-I.

## [Push using cpln](#push-cpln)

Another method to push an [image](/api-reference/image) to your private registry is by using the CLI's [image build](/api-reference/cli#image-build) command.

### [Option 1: Using buildpacks](#option-1)

Executing the command below will:

- Automatically build the [image](/api-reference/image) using [buildpacks](https://buildpacks.io/). No [Dockerfile](https://docs.docker.com/engine/api-reference/builder/) is required.
- Tag it with the required format
- and push it to your private registry

Buildpacks will crawl the application code and try to generate the [image](/api-reference/image). If it is unable to automatically generate the [image](/api-reference/image),
you will need to use [option 2](#option-2).

```
cpln image build --name IMAGE:TAG --push --org ORG_NAME
```

### [Option 2: Using a Dockerfile](#option-2)

Executing the command below is similar to [option 1](#option-1), but will build the [image](/api-reference/image) using Docker and will follow the instructions in the [Dockerfile](https://docs.docker.com/engine/api-reference/builder/).

```
cpln image build --dockerfile PATH_TO_DOCKERFILE/Dockerfile --name IMAGE:TAG --push --org ORG_NAME
```

## [Authentication using a Service Account](#authentication-service-account)

In situations where the [CLI](/api-reference/cli) cannot be used, authentication to your private registry is accomplished by using a [Service Account](/create-service-account).

Use the following parameters to authenticate using Docker or any Docker compatible client:

- Registry Server Hostname: `ORG_NAME.registry.cpln.io`
- Username: `'<token>'`
  - **NOTE:** The username is the literal string `'<token>'` (See example below).
- Password: `Service Account Key`
  - **NOTE:** Refer to the [Create a Service Account](/create-service-account) guide for instructions on how to generate a new key.

<Tip>
The Service Account Key is a sensitive value and should be stored securely/encrypted.

If the key is compromised, it can be deleted and a new one generated.
</Tip>

**Example using `Docker`:**

```
echo $SERVICE_ACCOUNT_KEY | docker login ORG_NAME.registry.cpln.io -u '<token>' --password-stdin
```

After successfully authenticating to your private registry, the service account will be able push images based on a
defined [Policy](/api-reference/policy). Refer to
the [Image Policy](/api-reference/image#minimum-policy) reference page for instructions on how to
configure the minimum policy necessary to push images.

## [Next Steps](#next-steps)

Once an [image](/api-reference/image) has been successfully pushed to your [org's](/api-reference/org) private registry, it can be referred to by
a [workload's container](/api-reference/workload#containers).

When setting up a [workload](/api-reference/workload), the list of available [images](/api-reference/image) stored in your private
registry can be viewed and selected by pressing Control-I.

## [Reference](#reference)

Refer to the [image build](/api-reference/cli#image-build) command for additional details.
